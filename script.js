require=function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};t[a][0].call(l.exports,(function(e){return o(t[a][1][e]||e)}),l,l.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({"tachikomas/AnonGift":[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,e);var t=i(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return n}(e("./Common"));t.exports=c},{"./Common":"tachikomas/Common"}],"tachikomas/Ban":[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,e);var t=i(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return n}(e("./Common"));t.exports=c},{"./Common":"tachikomas/Common"}],"tachikomas/ChartRoot":[function(e,t,n){(function(n){(function(){"use strict";function r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,c,"next",e)}function c(e){r(a,o,i,s,c,"throw",e)}s(void 0)}))}}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=e("../../../../helpers/signals").eventSignals,s=e("../../../../singletons/filter"),c=e("../../../../helpers/utils"),u=e("../../../../helpers/constants"),_="undefined"!=typeof window?window._:void 0!==n?n._:null,l=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._enabled=!1,this._chartDomSelector=t.chartDomSelector,this._title=t.title,this._helpContent=t.helpContent,this._type=t.type||"doughnut",this.update=_.throttle(o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._update();case 2:n._chartObject.update();case 3:case"end":return e.stop()}}),e)}))),t.updateThrottleTime||500),a.add(this._eventSignalsFunc.bind(this))}var t,n,r,l;return t=e,(n=[{key:"_eventSignalsFunc",value:function(e){switch(e.event){case"stream.load.ready":this._enabled=!0,this.reset();break;case"stream.cleanup":this._enabled=!1;break;case"data.cache.updated":case"filter.change":e.changed&&e.changed.channel?this.reset():this._enabled&&this.update()}}},{key:"_update",value:(l=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw"not implemented";case 1:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)})},{key:"reset",value:function(){this._initializedChartObject()}},{key:"_getParameters",value:function(){for(var e=s.getStart().unix(),t=s.getEnd().unix(),n=s.getIntervalLevel(),r=c.getTimeBucket(e,n),o=c.getTimeBucket(t,n),i=Math.floor((o-r)/n)+1;n!=u.BUCKET_DAY&&i>=250;){var a=u.INTERVAL_BUCKETS.indexOf(n);n=u.INTERVAL_BUCKETS[a+1],i=Math.floor((o-r)/n)+1}return s.setIntervalLevel(n),{interval:n,startBucket:r=c.getTimeBucket(e,n),endBucket:o=c.getTimeBucket(t,n),channel:s.getChannel(),length:i}}},{key:"_initializedChartObject",value:function(){this._chartObject&&this._chartObject.destroy(),document.getElementById(this._chartDomSelector).innerHTML=templates["./hbs/stream/components/chart.hbs"](this),this._helpDom=new BSN.Popover(document.getElementById("".concat(this._chartDomSelector,"-help")),{title:this._title,content:this._helpContent,placement:"left"}),this._chartObject=new Chart(document.getElementById("canvas-".concat(this._chartDomSelector)),this._defaultChartOptions())}},{key:"_defaultChartOptions",value:function(){return{type:this._type,data:{labels:[],datasets:[{data:[],backgroundColor:[],borderColor:[],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:this._title,fontSize:18}},animation:{duartion:250},hover:{animationDuration:0},responsiveAnimationDuration:250}}}},{key:"_getRootLabels",value:function(){return this._chartObject.data.labels}},{key:"_getDataset",value:function(){return this._chartObject.data.datasets}}])&&i(t.prototype,n),r&&i(t,r),e}();t.exports=l}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../../helpers/constants":"tachikomas/constants","../../../../helpers/signals":"tachikomas/signals","../../../../helpers/utils":"tachikomas/utils","../../../../singletons/filter":"tachikomas/filter"}],"tachikomas/Chatters":[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=templates["./hbs/stream/components/chatters-group.hbs"],i=templates["./hbs/stream/components/chatters-group-list.hbs"],a=e("../../../../singletons/users"),s=e("../../../../helpers/utils"),c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._key=t,this._chatterContainerDom=document.getElementById("chatter-container").insertAdjacentHTML("beforeend",o(t)),new BSN.Collapse(document.getElementById("".concat(t,"-expand"))),this.toPreviousPage=_.throttle(this._toPreviousPage.bind(this),200),this.toNextPage=_.throttle(this._toNextPage.bind(this),200),this.updateChattersList=_.throttle(this._updateChattersList.bind(this),2e3)}var t,n,c;return t=e,(n=[{key:"update",value:function(e){this.allChatters=e,this._validatePageNumber(),this.allChatters.length<=250?document.getElementById("".concat(this._key,"-paginator")).classList.add("d-none"):(document.getElementById("".concat(this._key,"-paginator")).classList.remove("d-none"),this._updatePaginationNumbers()),document.getElementById("".concat(this._key,"-count")).textContent=this.allChatters.length,this._updateChattersList()}},{key:"_validatePageNumber",value:function(){var e=Math.max(this._pageNumber||0,0);this._pageNumber=250*e>this.allChatters.length?0:e}},{key:"_updatePaginationNumbers",value:function(){this.allChatters.length>250&&(document.getElementById("".concat(this._key,"-pagination-numbers")).textContent="".concat(this.getLeftIndex()," ~ ").concat(this.getRightIndex()))}},{key:"_updateChattersList",value:function(){document.getElementById("".concat(this._key,"-list-chatters")).innerHTML=i(this._getPage());var e=document.getElementsByClassName("user-info");Array.from(e||[]).forEach((function(e){var t=e.id.replace("chatters-subs-",""),n=a.getUserByName(t);new BSN.Popover(e.firstElementChild,{title:t,content:s.convertObjectToHTML(n.getInfo())})}))}},{key:"getLeftIndex",value:function(){return 250*this._pageNumber}},{key:"getRightIndex",value:function(){return Math.min(this.allChatters.length,this.getLeftIndex()+250)}},{key:"_getPage",value:function(){return this.allChatters.slice(this.getLeftIndex(),this.getRightIndex())}},{key:"_toNextPage",value:function(){250*(this._pageNumber+1)<this.allChatters.length&&(this._pageNumber++,this._updatePaginationNumbers(),this._updateChattersList())}},{key:"_toPreviousPage",value:function(){this._pageNumber-1>=0&&(this._pageNumber--,this._updatePaginationNumbers(),this._updateChattersList())}}])&&r(t.prototype,n),c&&r(t,c),e}();t.exports=c},{"../../../../helpers/utils":"tachikomas/utils","../../../../singletons/users":"tachikomas/users"}],"tachikomas/Chat":[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,e);var t=i(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return n}(e("./Common"));t.exports=c},{"./Common":"tachikomas/Common"}],"tachikomas/Cheer":[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,e);var t=i(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).bits=parseInt(e.bits||0),r}return n}(e("./Common"));t.exports=c},{"./Common":"tachikomas/Common"}],"tachikomas/Common":[function(e,t,n){"use strict";t.exports=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userID=parseInt(t["user-id"]||t.userID),this.displayName=t["display-name"]||t.displayName,this.timestamp=parseInt(t["tmi-sent-ts"])||t.timestamp}},{}],"tachikomas/DataBucket":[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=e("../../../helpers/constants"),i=e("./DataNode"),a=e("../../../helpers/utils"),s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t?(this[o.TYPE_CHAT]=t[o.TYPE_CHAT].getCopy(),this[o.TYPE_RESUB]=t[o.TYPE_RESUB].getCopy(),this[o.TYPE_CHEER]=t[o.TYPE_CHEER].getCopy(),this[o.TYPE_SUB]=t[o.TYPE_SUB].getCopy(),this[o.TYPE_BAN]=t[o.TYPE_BAN].getCopy(),this[o.TYPE_ANONGIFT]=t[o.TYPE_ANONGIFT].getCopy(),this[o.TYPE_SUBGIFT]=t[o.TYPE_SUBGIFT].getCopy(),this[o.TYPE_SUBMYSTERY]=t[o.TYPE_SUBMYSTERY].getCopy(),this[o.TYPE_TIMEOUT]=t[o.TYPE_TIMEOUT].getCopy()):(this[o.TYPE_CHAT]=new i,this[o.TYPE_RESUB]=new i,this[o.TYPE_CHEER]=new i,this[o.TYPE_SUB]=new i,this[o.TYPE_BAN]=new i,this[o.TYPE_ANONGIFT]=new i,this[o.TYPE_SUBGIFT]=new i,this[o.TYPE_SUBMYSTERY]=new i,this[o.TYPE_TIMEOUT]=new i)}var t,n,s;return t=e,(n=[{key:"add",value:function(e){this[a.getMessageType(e)].add(e)}},{key:"getCopy",value:function(){return new e(this)}},{key:"merge",value:function(e,t){var n=this;return Object.keys(e).forEach((function(r){n[r].merge(e[r],t)})),this}}])&&r(t.prototype,n),s&&r(t,s),e}();t.exports=s},{"../../../helpers/constants":"tachikomas/constants","../../../helpers/utils":"tachikomas/utils","./DataNode":"tachikomas/DataNode"}],"tachikomas/DataChannel":[function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=e("../../../helpers/constants"),a=e("../../../helpers/utils"),s=e("./DataBucket"),c=e("./blanks"),u=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cache=(r(t={},i.BUCKET_FIVE,{}),r(t,i.BUCKET_HOUR,{}),t),this._data={},this._updated=new Set}var t,n,u;return t=e,(n=[{key:"add",value:function(e){var t=Math.floor(e.timestamp/1e3),n=a.getTimeBucket(t,i.BUCKET_MIN),r=a.getTimeBucket(t,i.BUCKET_FIVE);this._updated.add(r),this._data[n]||(this._data[n]=new s),this._data[n].add(e)}},{key:"_getAt",value:function(e){var t=this._data[e];return Object.freeze(t||c.blankDataBucket)}},{key:"_validateCache",value:function(){var e=this;Array.from(this._updated).forEach((function(t){var n=a.getTimeBucket(t,i.BUCKET_FIVE),r=a.getTimeBucket(t,i.BUCKET_HOUR);delete e._cache[i.BUCKET_FIVE][n],delete e._cache[i.BUCKET_HOUR][r]})),this._updated.clear()}},{key:"_getFiveMinRange",value:function(e){if(!this._cache[i.BUCKET_FIVE][e]){for(var t=this._getAt(e).getCopy(),n=e+i.BUCKET_MIN;n<e+i.BUCKET_FIVE;n+=i.BUCKET_MIN)t.merge(this._getAt(n),!0);this._cache[i.BUCKET_FIVE][e]=Object.freeze(t)}return this._cache[i.BUCKET_FIVE][e]}},{key:"_getHourRange",value:function(e){if(!this._cache[i.BUCKET_HOUR][e]){for(var t=this._getFiveMinRange(e).getCopy(),n=e+i.BUCKET_FIVE;n<e+i.BUCKET_HOUR;n+=i.BUCKET_FIVE)t.merge(this._getFiveMinRange(n),!0);this._cache[i.BUCKET_HOUR][e]=Object.freeze(t)}return this._cache[i.BUCKET_HOUR][e]}},{key:"get",value:function(e,t){this._validateCache();for(var n=new s,r=e;r<t;)r%i.BUCKET_HOUR==0&&r+i.BUCKET_HOUR<=t?(n.merge(this._getHourRange(r)),r+=i.BUCKET_HOUR):r%i.BUCKET_FIVE==0&&r+i.BUCKET_FIVE<=t?(n.merge(this._getFiveMinRange(r)),r+=i.BUCKET_FIVE):(n.merge(this._getAt(r)),r+=i.BUCKET_MIN);return n}}])&&o(t.prototype,n),u&&o(t,u),e}();t.exports=u},{"../../../helpers/constants":"tachikomas/constants","../../../helpers/utils":"tachikomas/utils","./DataBucket":"tachikomas/DataBucket","./blanks":"tachikomas/blanks"}],"tachikomas/DataNode":[function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=e("../../users"),s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._sum=t||0,this._users=n||{}}var t,n,s;return t=e,(n=[{key:"add",value:function(e){var t=e.bits?e.bits/100:1;this._sum+=t,this._users[e.displayName]=(this._users[e.displayName]||0)+t}},{key:"getCopy",value:function(){return new e(this._sum,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this._users))}},{key:"merge",value:function(e,t){var n=this;return e&&Object.keys(e._users).forEach((function(r){(t||a.getUserByName(r).isApplicable())&&(n._users[r]=(n._users[r]||0)+e._users[r],n._sum+=e._users[r])})),this}}])&&i(t.prototype,n),s&&i(t,s),e}();t.exports=s},{"../../users":"tachikomas/users"}],"tachikomas/DateTime":[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=e("../../../../helpers/signals").eventSignals,moment=e("../../../../helpers/moment"),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.dom=document.getElementById(t),this.timeSelector=flatpickr(this.dom,{dateFormat:"Y-m-d H:i",enableTime:!0,allowInput:!0,clickOpens:!0,time_24hr:!0,minDate:"2020-01-01 00:00",defaultDate:moment().toDate(),onValueUpdate:_.debounce((function(){return o.dispatch({event:"date.change"},1e3)}))})}var t,n,i;return t=e,(n=[{key:"get",value:function(){return moment(this.timeSelector.selectedDates[0])}},{key:"set",value:function(e){this.timeSelector.setDate([e.format("YYYY-MM-DD HH:mm")],!0)}},{key:"destroy",value:function(){this.timeSelector.destroy()}}])&&r(t.prototype,n),i&&r(t,i),e}();t.exports=i},{"../../../../helpers/moment":"tachikomas/moment","../../../../helpers/signals":"tachikomas/signals"}],"tachikomas/MysterySubGift":[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,e);var t=i(n);function n(e,r,o){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(i=t.call(this,e,r)).count=o,i}return n}(e("./Sub"));t.exports=c},{"./Sub":"tachikomas/Sub"}],"tachikomas/ReSub":[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,e);var t=i(n);function n(e,r,o){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(i=t.call(this,e,r)).months=o,i}return n}(e("./Sub"));t.exports=c},{"./Sub":"tachikomas/Sub"}],"tachikomas/SubGift":[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,e);var t=i(n);function n(e,r,o){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(i=t.call(this,e,r)).recipientDisplayName=e["msg-param-recipient-display-name"]||e.recipientDisplayName,i.recipientID=e["msg-param-recipient-id"]||e.recipientID,i.count=o,i}return n}(e("./Sub"));t.exports=c},{"./Sub":"tachikomas/Sub"}],"tachikomas/Sub":[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,e);var t=i(n);function n(e,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).methods=r,o.subType=r?o.methods.plan:void 0,o}return n}(e("./Common"));t.exports=c},{"./Common":"tachikomas/Common"}],"tachikomas/Timeout":[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,e);var t=i(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return n}(e("./Common"));t.exports=c},{"./Common":"tachikomas/Common"}],"tachikomas/User":[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=e("../filter"),i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=t?parseInt(t):void 0,this._userName=n}var t,n,i;return t=e,(n=[{key:"getID",value:function(){return this._id}},{key:"getUserName",value:function(){return this._userName}},{key:"addFollowing",value:function(e){e&&(this._following||(this._following=new Set),this._following.add(e))}},{key:"addFollowedBy",value:function(e){e&&(this._followedBy||(this._followedBy=new Set),this._followedBy.add(e))}},{key:"addSubscribedTo",value:function(e){e&&(this._subscribedTo||(this._subscribedTo={}),this._subscribedTo[e.broadcaster_id]=e)}},{key:"getFollowingCounts",value:function(){return this._following?this._following.size:void 0}},{key:"getFollowedByCounts",value:function(){return this._followedBy?this._followedBy.size:void 0}},{key:"getSubscribedToCount",value:function(){return this._subscribedTo?Object.keys(this._subscribedTo).length:void 0}},{key:"isFollowing",value:function(e){return this._following?this._following.has(e):void 0}},{key:"isFollowingCurrent",value:function(){return this.isFollowing(o.getChannelId())}},{key:"isFollowedBy",value:function(e){return this._followedBy?this._followedBy.has(e):void 0}},{key:"getSubscribedTo",value:function(e){return this._subscribedTo?this._subscribedTo[e]:void 0}},{key:"getSubscribedToCurrent",value:function(){return this.getSubscribedTo(o.getChannelId())}},{key:"getInfo",value:function(){var e={following:this.isFollowingCurrent()},t=this.getSubscribedToCurrent();return t?(e.is_subscribed=!0,e.tier=t.tier,e.plan_name=t.plan_name,t.is_gift&&(e.gifter_name=t.gifter_name)):e.is_subscribed=!1,e}},{key:"getInfoCss",value:function(){return this.getSubscribedTo(o.getChannelId())?"subscribed":"not-subscribed"}},{key:"isApplicable",value:function(){return":following"===o.getSearchString()?Boolean(this.isFollowingCurrent()):":notfollowing"===o.getSearchString()?!this.isFollowingCurrent():!o.getSearchString()||0===o.getSearchString().indexOf(":")||this._userName.toLowerCase().indexOf(o.getSearchString())>-1}}])&&r(t.prototype,n),i&&r(t,i),e}();t.exports=i},{"../filter":"tachikomas/filter"}],"tachikomas/api":[function(e,t,n){(function(n){(function(){"use strict";function r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,c,"next",e)}function c(e){r(a,o,i,s,c,"throw",e)}s(void 0)}))}}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=e("../env"),s=e("http-status-codes").StatusCodes,c=e("p-limit"),u="undefined"!=typeof window?window.pako:void 0!==n?n.pako:null,l=/[0-9a-zA-Z][\w]{3,23}/,h=Object.freeze({headers:{"Client-ID":a.CLIENT_ID,Accept:"application/vnd.twitchtv.v5+json"}}),f=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.reset()}var t,n,r,f,p,d,y,m;return t=e,(n=[{key:"reset",value:function(){this._pLimit=c(10),this._allowance=5,this._resetTimeout=void 0}},{key:"_getEffectiveTimeout",value:function(e){var t=Math.pow(5,(e||0)+1)+Math.floor(50*Math.random());return new Promise((function(e){return setTimeout(e,t)}))}},{key:"_queryTwitchApi",value:(m=o(regeneratorRuntime.mark((function e(t,n,r){var o,i,a,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._allowance<=0)){e.next=7;break}if(!(r>=5)){e.next=4;break}throw console.warn('query retry limit reached! url="'.concat(t,'"')),"api limit reached";case 4:return e.next=6,this._getEffectiveTimeout(r);case 6:return e.abrupt("return",this._queryTwitchApi(t,n,(r||0)+1));case 7:return e.next=9,fetch(t,n||h);case 9:if(o=e.sent,this._allowance=parseInt(o.headers.get("Ratelimit-Remaining")),this._allowance&&o.status!==s.TOO_MANY_REQUESTS||(this._allowance=0),this._resetTimeout||0!=this._allowance||(i=parseInt(o.headers.get("Ratelimit-Reset")),a=isNaN(i)?3e3:Math.min(i,15e3),this._resetTimeout=setTimeout((function(){c._allowance=5,c._resetTimeout=void 0}),a)),o.ok){e.next=16;break}throw console.warn("query failed!"),{status:o.status,msg:"query failed"};case 16:if(!(o.headers.get("Content-Type").indexOf("gzip")>-1)){e.next=25;break}return e.t0=JSON,e.t1=u,e.next=21,o.arrayBuffer();case 21:return e.t2=e.sent,e.t3={to:"string"},e.t4=e.t1.ungzip.call(e.t1,e.t2,e.t3),e.abrupt("return",e.t0.parse.call(e.t0,e.t4));case 25:return e.next=27,o.json();case 27:return e.abrupt("return",e.sent);case 28:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return m.apply(this,arguments)})},{key:"queryTwitchApi",value:(y=o(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(a.TWITCH_ENDPOINT,"/").concat(t),e.abrupt("return",this._pLimit(this._queryTwitchApi.bind(this,r,n)));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return y.apply(this,arguments)})},{key:"queryTmiApi",value:(d=o(regeneratorRuntime.mark((function e(t){var n,r,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(a.TMI_ENDPOINT,"/").concat(t),r=n.indexOf("127.0.0.1")>-1,o=r?n:"https://api.allorigins.win/get?url=".concat(encodeURIComponent(n)),e.next=5,fetch(o);case 5:return i=e.sent,e.next=8,i.json();case 8:return s=e.sent,e.abrupt("return",r?s:JSON.parse(s.contents));case 10:case"end":return e.stop()}}),e)}))),function(e){return d.apply(this,arguments)})},{key:"getChannelSearch",value:(p=o(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.test(t)){e.next=4;break}return e.next=3,this.queryTwitchApi("helix/search/channels?query=".concat(t,"&first=10"),n);case 3:return e.abrupt("return",e.sent);case 4:return e.abrupt("return",{});case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return p.apply(this,arguments)})},{key:"getChannelInfo",value:(f=o(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.queryTwitchApi("helix/streams?user-login=".concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)})}])&&i(t.prototype,n),r&&i(t,r),e}());t.exports=f}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../env":"tachikomas/env","http-status-codes":void 0,"p-limit":void 0}],"tachikomas/auth":[function(e,t,n){"use strict";function r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,c,"next",e)}function c(e){r(a,o,i,s,c,"throw",e)}s(void 0)}))}}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=e("../env"),s=e("../helpers/signals").eventSignals,c=Object.freeze({profile_image_url:"https://static-cdn.jtvnw.net/user-default-pictures-uv/294c98b5-e34d-42cd-a8f0-140b72fba9b0-profile_image-300x300.png",login:"unknown-user"}),u="scope=user:read:email+bits:read+moderation:read+channel:read:subscriptions+analytics:read:games",l=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initialize()}var t,n,r,l,h,f,p;return t=e,(n=[{key:"_initialize",value:(p=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this._authToken=JSON.parse(localStorage.getItem("auth"))}catch(e){this._authToken=void 0,console.warn("failed to parse localstorage cache",e)}return e.next=3,this._postAuth();case 3:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"_setAuthToken",value:function(e){e&&(this._authToken=e,localStorage.setItem("auth",JSON.stringify(this._authToken)))}},{key:"_authWithSecret",value:(f=o(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.CLIENT_SECRET){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("".concat(a.AUTH_ENDPOINT,"/oauth2/token?client_id=").concat(a.CLIENT_ID,"&client_secret=").concat(a.CLIENT_SECRET,"&grant_type=client_credentials&").concat(u),{method:"POST"});case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,this._setAuthToken(n.access_token);case 9:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"authenticate",value:(h=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isAuthenticated()){e.next=2;break}return e.abrupt("return");case 2:if(!t){e.next=6;break}this._setAuthToken(t.get("access_token")),e.next=12;break;case 6:if(!a.CLIENT_SECRET){e.next=11;break}return e.next=9,this._authWithSecret();case 9:e.next=12;break;case 11:return e.abrupt("return","".concat(a.AUTH_ENDPOINT,"/oauth2/authorize?client_id=").concat(a.CLIENT_ID,"&redirect_uri=").concat(a.REDIRECT_URL,"&response_type=token&").concat(u));case 12:return e.next=14,this._postAuth();case 14:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"_postAuth",value:(l=o(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isAuthenticated()){e.next=14;break}return e.prev=1,e.next=4,fetch("".concat(a.TWITCH_ENDPOINT,"/helix/users"),this.getAuthObj());case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,this._user=n.data[0],e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.warn("failed to fetch logged in user info: ".concat(e.t0));case 14:this._user||(this._user=c),s.dispatch({event:"draw.nav.auth"}),this.isBroadcaster()&&s.dispatch({event:"channel.changed",channel:this.getLogin()});case 17:case"end":return e.stop()}}),e,this,[[1,11]])}))),function(){return l.apply(this,arguments)})},{key:"isAuthenticated",value:function(){return Boolean(this._authToken)}},{key:"isBroadcaster",value:function(){return Boolean(this._user&&this._user.broadcaster_type&&""!==this._user.broadcaster_type)}},{key:"getLogin",value:function(){return this._user&&this._user.login}},{key:"getID",value:function(){return this._user&&this._user.id}},{key:"logout",value:function(){this._authToken=void 0,this._user=void 0,localStorage.removeItem("auth"),s.dispatch({event:"draw.nav.auth"})}},{key:"getAuthObj",value:function(){if(this.isAuthenticated())return{headers:{"Client-ID":a.CLIENT_ID,Accept:"application/vnd.twitchtv.v5+json",Authorization:"Bearer ".concat(this._authToken)}}}}])&&i(t.prototype,n),r&&i(t,r),e}());t.exports=l},{"../env":"tachikomas/env","../helpers/signals":"tachikomas/signals"}],"tachikomas/blanks":[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var a=e("../../../helpers/constants"),s=e("./DataNode"),c=e("./DataBucket"),u=new(function(){function e(){r(this,e),this._sum=0,this._users={},Object.freeze(this)}return i(e,[{key:"merge",value:function(e){return e.getCopy()}},{key:"getCopy",value:function(){return new s(0,{})}}]),e}()),l=new(function(){function e(){r(this,e),this[a.TYPE_CHAT]=u,this[a.TYPE_RESUB]=u,this[a.TYPE_CHEER]=u,this[a.TYPE_SUB]=u,this[a.TYPE_BAN]=u,this[a.TYPE_ANONGIFT]=u,this[a.TYPE_SUBGIFT]=u,this[a.TYPE_SUBMYSTERY]=u,this[a.TYPE_TIMEOUT]=u,Object.freeze(this)}return i(e,[{key:"merge",value:function(e){return e.getCopy()}},{key:"getCopy",value:function(){var e=new c;return e[a.TYPE_CHAT]=new s,e[a.TYPE_RESUB]=new s,e[a.TYPE_CHEER]=new s,e[a.TYPE_SUB]=new s,e[a.TYPE_BAN]=new s,e[a.TYPE_ANONGIFT]=new s,e[a.TYPE_SUBGIFT]=new s,e[a.TYPE_SUBMYSTERY]=new s,e[a.TYPE_TIMEOUT]=new s,e}}]),e}());t.exports.blankDataNode=u,t.exports.blankDataBucket=l},{"../../../helpers/constants":"tachikomas/constants","./DataBucket":"tachikomas/DataBucket","./DataNode":"tachikomas/DataNode"}],"tachikomas/channelFollowsFetcher":[function(e,t,n){(function(n){(function(){"use strict";function r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _="undefined"!=typeof window?window._:void 0!==n?n._:null,i=e("../../singletons/auth"),a=e("../../singletons/api"),s=e("../../helpers/signals").eventSignals,c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._paginations={},this.fetch=_.throttle(this._fetch,5e3)}var t,n,c,u,l;return t=e,(n=[{key:"_fetch",value:(u=regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&"done"!==this._paginations[t]){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,i.getAuthObj();case 4:n=e.sent,e.prev=5;case 6:return r="helix/users/follows?first=100&to_id=".concat(t),e.next=9,a.queryTwitchApi(this._paginations[t]?"".concat(r,"&after=").concat(this._paginations[t]):r,n);case 9:if(o=e.sent,s.dispatch({event:"fetch.channel.follows.resp",data:o,channelID:t}),o.pagination&&o.pagination.cursor){e.next=14;break}return this._paginations[t]="done",e.abrupt("return");case 14:this._paginations[t]=o.pagination.cursor;case 15:e.next=6;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),console.warn("failed to fetch channel follows",e.t0);case 22:case"end":return e.stop()}}),e,this,[[5,19]])})),l=function(){var e=this,t=arguments;return new Promise((function(n,o){var i=u.apply(e,t);function a(e){r(i,n,o,a,s,"next",e)}function s(e){r(i,n,o,a,s,"throw",e)}a(void 0)}))},function(e){return l.apply(this,arguments)})}])&&o(t.prototype,n),c&&o(t,c),e}();t.exports=new c}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../helpers/signals":"tachikomas/signals","../../singletons/api":"tachikomas/api","../../singletons/auth":"tachikomas/auth"}],"tachikomas/channelSubscribedFetcher":[function(e,t,n){(function(n){(function(){"use strict";function r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _="undefined"!=typeof window?window._:void 0!==n?n._:null,i=e("../../singletons/auth"),a=e("../../singletons/api"),s=e("../../helpers/signals").eventSignals,c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._paginations={},this._channelID=void 0,this._isRunning=void 0,this.fetch=_.throttle(this._fetch,5e3)}var t,n,c,u,l;return t=e,(n=[{key:"_fetch",value:(u=regeneratorRuntime.mark((function e(t){var n,r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._channelID=t||this._channelID,!this._isRunning){e.next=3;break}return e.abrupt("return");case 3:if(this._channelID&&"done"!==this._paginations[this._channelID]){e.next=5;break}return e.abrupt("return");case 5:return this._isRunning=!0,e.next=8,i.getAuthObj();case 8:n=e.sent,e.prev=9;case 10:if(!this._isRunning){e.next=20;break}return r=this._channelID,o="helix/subscriptions?first=100&broadcaster_id=".concat(r),e.next=15,a.queryTwitchApi(this._paginations[r]?"".concat(o,"&after=").concat(this._paginations[r]):o,n);case 15:c=e.sent,s.dispatch({event:"fetch.channel.subscribed.resp",data:c,channelID:r}),c.pagination&&c.pagination.cursor?this._paginations[r]=c.pagination.cursor:(this._paginations[r]="done",this._isRunning=!1),e.next=10;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(9),this._isRunning=!1,console.warn("failed to fetch channel follows",e.t0);case 26:case"end":return e.stop()}}),e,this,[[9,22]])})),l=function(){var e=this,t=arguments;return new Promise((function(n,o){var i=u.apply(e,t);function a(e){r(i,n,o,a,s,"next",e)}function s(e){r(i,n,o,a,s,"throw",e)}a(void 0)}))},function(e){return l.apply(this,arguments)})}])&&o(t.prototype,n),c&&o(t,c),e}();t.exports=new c}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../helpers/signals":"tachikomas/signals","../../singletons/api":"tachikomas/api","../../singletons/auth":"tachikomas/auth"}],"tachikomas/chatsByUsersVC":[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=e("./ChartRoot"),p=e("../../../../helpers/constants"),d=e("../../../../singletons/dataCache"),y=e("../../../../helpers/utils"),m=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(f,e);var t,n,r,i,l,h=u(f);function f(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),h.call(this,{chartDomSelector:"pie-chats-by-users",title:"Chat Counts by User Name",helpContent:"<p>Chats grouped by user name</p>"})}return t=f,(n=[{key:"_update",value:(i=regeneratorRuntime.mark((function e(){var t,n,r,i,a,s,c,u,l,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getParameters();case 2:for(t=e.sent,n=t.channel,r=t.startBucket,i=t.endBucket,a=this._getRootLabels(),s=this._getDataset(),c=s[0].data,u=d.get(n,r,i+p.BUCKET_MIN)[p.TYPE_CHAT],l=Object.entries(u._users).sort((function(e,t){var n=o(e,2)[1];return o(t,2)[1]-n})),h=Math.min(l.length,10),f=0;f<h;f++)a[f]=l[f][0],c[f]=l[f][1];a.length=h,c.length=h,s[0].backgroundColor=y.getBackgroundColor(a),s[0].borderColor=y.getBorderColor(a);case 17:case"end":return e.stop()}}),e,this)})),l=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function s(e){a(o,n,r,s,c,"next",e)}function c(e){a(o,n,r,s,c,"throw",e)}s(void 0)}))},function(){return l.apply(this,arguments)})}])&&s(t.prototype,n),r&&s(t,r),f}(f));t.exports=m},{"../../../../helpers/constants":"tachikomas/constants","../../../../helpers/utils":"tachikomas/utils","../../../../singletons/dataCache":"tachikomas/dataCache","./ChartRoot":"tachikomas/ChartRoot"}],"tachikomas/chattersTableVC":[function(e,t,n){(function(n){(function(){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _="undefined"!=typeof window?window._:void 0!==n?n._:null,s=e("../../../singletons/users"),c=e("./components/Chatters"),u=e("../../../singletons/filter"),l=["broadcaster","vips","moderators","staff","admins","global_mods","viewers"],h=templates["./hbs/stream/chatters.hbs"],f=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.loadChattersTable=_.debounce(this._loadChattersTable.bind(this)),this.onChattersSearchKeyUp=_.debounce((function(){u.setSearchString(document.getElementById("chatters-search").value)}),1e3),e("../../../helpers/signals").domSignals.add(this._domSignalsEvent.bind(this))}var n,i,f;return n=t,(i=[{key:"_domSignalsEvent",value:function(e){switch(e.type){case"click":if(e.id.endsWith("-page-right")){var t=e.id.replace("-page-right","");this._chatters[t].toNextPage()}else if(e.id.endsWith("-page-left")){var n=e.id.replace("-page-left","");this._chatters[n].toPreviousPage()}break;case"keyup":"chatters-search"===e.id&&this.onChattersSearchKeyUp()}}},{key:"_loadChattersTable",value:function(){this._chatters=this._chatters||{};var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}(Object.entries(s.getViewers())||{});try{for(t.s();!(e=t.n()).done;){var n=r(e.value,2),i=n[0],a=n[1];this._chatters[i]||(this._chatters[i]=new c(i)),this._chatters[i].update(a)}}catch(e){t.e(e)}finally{t.f()}}},{key:"initialize",value:function(){this.destroy(),document.getElementById("chatters-table").innerHTML=h(l),this.chattersAutocomplete=new Awesomplete(document.getElementById("chatters-search"),{minChars:1,maxItems:10,autoFirst:!0,list:[":following",":notfollowing"]}),this._helpDom=new BSN.Popover(document.getElementById("chatters-help"),{title:"Chatters View",content:"Displays current chatters in the channel refreshed at every minute.</br>\n            </br>\n            Chatters search can search via chatters name or any of the following flags.</br>\n            <ul>\n                <li><code>:following</code></li>\n                <li><code>:notfollowing</code></li>\n            </ul>",placement:"left"})}},{key:"updateChattersList",value:function(){for(var e in this._chatters)this._chatters[e].updateChattersList()}},{key:"destroy",value:function(){this.bsnChattersSearch&&(this.bsnChattersSearch.dispose(),this.bsnChattersSearch=void 0)}}])&&a(n.prototype,i),f&&a(n,f),t}();t.exports=new f}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../helpers/signals":"tachikomas/signals","../../../singletons/filter":"tachikomas/filter","../../../singletons/users":"tachikomas/users","./components/Chatters":"tachikomas/Chatters"}],"tachikomas/constants":[function(e,t,n){"use strict";t.exports=Object.freeze({TYPE_CHAT:0,TYPE_RESUB:1,TYPE_CHEER:2,TYPE_SUB:3,TYPE_BAN:4,TYPE_ANONGIFT:5,TYPE_SUBGIFT:6,TYPE_SUBMYSTERY:7,TYPE_TIMEOUT:8,NUM_TYPES:9,CHART_LABEL:["chat","re-subscription","cheer","subscription","ban","anonymous gift","subscription gift","subscription mystery","timeout"],CHART_BACKGROUND_COLOR:["rgb(255, 255, 0, 0.3)","rgb(153, 255, 51, 0.3)","rgb(51, 255, 255, 0.3)","rgb(0, 128, 225, 0.3)","rgb(255, 51, 153, 0.3)","rgb(102, 0, 204, 0.3)","rgb(255, 128, 0, 0.3)","rgb(128, 128, 128, 0.3)","rgb(0, 225, 139, 0.3)"],CHART_BORDER_COLOR:["rgb(255, 255, 0, 1.0)","rgb(153, 255, 51, 1.0)","rgb(51, 255, 255, 1.0)","rgb(0, 128, 225, 1.0)","rgb(255, 51, 153, 1.0)","rgb(102, 0, 204, 1.0)","rgb(255, 128, 0, 1.0)","rgb(128, 128, 128, 1.0)","rgb(0, 225, 139, 1.0)"],BUCKET_MIN:60,BUCKET_FIVE:300,BUCKET_HOUR:3600,BUCKET_DAY:86400,INTERVAL_BUCKETS:[60,300,3600,86400],TABS_OPTIONS:["stream"],CSS_UNKNOWN:"text-muted",CSS_FOLLOWING:"stream-following",CSS_NOT_FOLLOWING:"stream-not-following",MAX_VIEWERS_COUNTS_FOR_PROCESS:1e3})},{}],"tachikomas/dataCache":[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=e("./models/DataChannel"),i=e("../../helpers/signals").eventSignals,a=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.reset()}var t,n,a;return t=e,(n=[{key:"reset",value:function(){this._data={}}},{key:"_isValidRaw",value:function(e){return e.displayName?!!e.timestamp||(console.warn("missing timestamp",e),!1):(console.warn("missing displayname",e),!1)}},{key:"_ensureChannelExists",value:function(e){this._data[e]||(this._data[e]=new o)}},{key:"add",value:function(e,t){var n="#"===e.charAt(0)?e.substring(1):e;this._isValidRaw(t)&&(this._ensureChannelExists(n),this._data[n].add(t),i.dispatch({event:"data.cache.updated"}))}},{key:"get",value:function(e,t,n){return this._ensureChannelExists(e),this._data[e].get(t,n)}}])&&r(t.prototype,n),a&&r(t,a),e}());t.exports=a},{"../../helpers/signals":"tachikomas/signals","./models/DataChannel":"tachikomas/DataChannel"}],"tachikomas/dateTimeRangeVC":[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=e("../../../helpers/utils"),i=e("./components/DateTime"),a=e("../../../singletons/filter"),s=new(function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.defaultStart=o.getNow(),this.isLive=!0,window.addEventListener("focus",this._onWindowFocus.bind(this)),e("../../../helpers/signals").domSignals.add(this._domSignalsFunc.bind(this))}var n,s,c;return n=t,(s=[{key:"_domSignalsFunc",value:function(e){"click"===e.type&&"time-reset"===e.id&&this._timeReset()}},{key:"_isValid",value:function(){return Boolean(this.start&&this.end)}},{key:"_setIsLive",value:function(){var e=this.end.get().unix()-o.getNow().add(-1,"minutes").unix();this.isLive=e>=0&&e<=60}},{key:"_timeReset",value:function(){this.start.set(this.defaultStart),this.end.set(o.getNow())}},{key:"_onWindowFocus",value:function(){this.isLive&&this._isValid()&&this._timeReset()}},{key:"setDate",value:function(){if(this._isValid()){var e=this.start.get(),t=this.end.get();if(t.unix()<e.unix())return this.start.set(t),void this.end.set(e);this._setIsLive(),a.setStart(e),a.setEnd(t)}}},{key:"minProgressed",value:function(){this.isLive&&this._isValid()&&this.end.set(o.getNow())}},{key:"initialize",value:function(){this.destroy(),document.getElementById("time-selectors").innerHTML=templates["./hbs/stream/date-time-range.hbs"](),this.start=new i("time-start"),this.end=new i("time-end"),new BSN.Popover(document.getElementById("time-help"),{title:"Date range",content:"Data display time window.",delay:500,placement:"bottom"}),new BSN.Popover(document.getElementById("time-reset-help"),{title:"Reset time",content:"Reset time window to page load time to now",delay:500,placement:"bottom"})}},{key:"destroy",value:function(){this.start&&(this.start.destroy(),this.start=void 0),this.end&&(this.end.destroy(),this.end=void 0)}}])&&r(n.prototype,s),c&&r(n,c),t}());t.exports=s},{"../../../helpers/signals":"tachikomas/signals","../../../helpers/utils":"tachikomas/utils","../../../singletons/filter":"tachikomas/filter","./components/DateTime":"tachikomas/DateTime"}],"tachikomas/env":[function(e,t,n){"use strict";t.exports={ENVIRONMENT:"prod",HOST_ENDPOINT:"https://jung-kim.github.io/tadashi",TWITCH_ENDPOINT:"https://api.twitch.tv",AUTH_ENDPOINT:"https://id.twitch.tv",TMI_ENDPOINT:"https://tmi.twitch.tv",REDIRECT_URL:"https://jung-kim.github.io/tadashi/index.html",SERVICE:"tachikomas",CLIENT_ID:"nrmkyj3jbq4eukbuunluz5yygi9t7v",GIT_HASH:"6ba655c",TAG:"6ba655c"}},{}],"tachikomas/events":[function(e,t,n){"use strict";t.exports={AnonGift:e("./AnonGift"),Ban:e("./Ban"),Cheer:e("./Cheer"),Chat:e("./Chat"),MysterySubGift:e("./MysterySubGift"),ReSub:e("./ReSub"),SubGift:e("./SubGift"),Sub:e("./Sub"),Timeout:e("./Timeout")}},{"./AnonGift":"tachikomas/AnonGift","./Ban":"tachikomas/Ban","./Chat":"tachikomas/Chat","./Cheer":"tachikomas/Cheer","./MysterySubGift":"tachikomas/MysterySubGift","./ReSub":"tachikomas/ReSub","./Sub":"tachikomas/Sub","./SubGift":"tachikomas/SubGift","./Timeout":"tachikomas/Timeout"}],"tachikomas/filter":[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=e("../env"),i=e("../helpers/constants"),moment=e("../helpers/moment"),a=e("../helpers/signals").eventSignals,s=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.reset()}var t,n,s;return t=e,(n=[{key:"reset",value:function(){o._filter={},localStorage.getItem("channel")?o._filter._channel=localStorage.getItem("channel"):o._filter._channel=void 0,localStorage.getItem("channel-id")?o._filter._channelId=parseInt(localStorage.getItem("channel-id")):o._filter._channelId=void 0,o._filter._start=moment().set("second",0).set("millisecond",0),o._filter._end=moment().set("second",0).set("millisecond",0),o._filter._searchString=void 0,o._filter._intervalLevel=i.BUCKET_MIN}},{key:"setStart",value:function(e){moment.isMoment(e)&&e.unix()!==this.getStart().unix()&&(o._filter._start=e,a.dispatch({event:"filter.change",changed:{start:e}}))}},{key:"getStart",value:function(){return o._filter._start}},{key:"setEnd",value:function(e){moment.isMoment(e)&&e.unix()!==this.getEnd().unix()&&(o._filter._end=e,a.dispatch({event:"filter.change",changed:{end:e}}))}},{key:"getEnd",value:function(){return o._filter._end}},{key:"setSearchString",value:function(e){if(e&&e!==this.getSearchString()){var t=e.trim().toLowerCase();o._filter._searchString=t,a.dispatch({event:"filter.change",changed:{searchString:t}})}}},{key:"getSearchString",value:function(){return o._filter._searchString}},{key:"setIntervalLevel",value:function(e){e&&e!==this.getIntervalLevel()&&(o._filter._intervalLevel=e,a.dispatch({event:"filter.change",changed:{intervalLevel:e}}))}},{key:"getIntervalLevel",value:function(){return o._filter._intervalLevel}},{key:"setChannelInfo",value:function(e,t,n){this.getChannelId()===t&&this.getChannel()===e||(o._filter._channel=e,o._filter._channelId=parseInt(t),n||a.dispatch({event:"filter.change",changed:{channelId:this.getChannelId(),channel:this.getChannel()}}))}},{key:"getChannelId",value:function(){return o._filter._channelId}},{key:"getChannel",value:function(){return o._filter._channel}}])&&r(t.prototype,n),s&&r(t,s),e}());t.exports=s},{"../env":"tachikomas/env","../helpers/constants":"tachikomas/constants","../helpers/moment":"tachikomas/moment","../helpers/signals":"tachikomas/signals"}],"tachikomas/followedStreamersVC":[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=e("./ChartRoot"),h=e("../../../../singletons/users"),f=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(l,e);var t,n,r,c=s(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),c.call(this,{type:"bar",title:"Top followed streamers by viewers",chartDomSelector:"chart-followed-streamers",helpContent:"<p>Top 10 followed streamers by viewers</br>\nIncludes data from both current viewers and the viewers who have left as well during the data capture period.</br> \n</br></br>\n- followed by admirers: number of viewers following the target streamer but not current streamer.</br>\n- followed by followers: number of viewers following the target streamd and current streamer.</br>\n- unknown: data hasn't beent fetched yet and is unkonwn.\n</p>",updateThrottleTime:5e3})}return t=l,(n=[{key:"_eventSignalsFunc",value:function(e){switch(e.event){case"filter.change":e.changed.channel&&this.reset();break;case"stream.load.ready":this._enabled=!0,this.reset();break;case"stream.cleanup":this._enabled=!1;break;case"fetch.user.follows.resp":this._enabled&&(this.update(),this._chartObject.update())}}},{key:"_defaultChartOptions",value:function(){var e=i(u(l.prototype),"_defaultChartOptions",this).call(this);return e.data.datasets=[{data:[],backgroundColor:"#B346A3",borderColor:"#B34650",borderWidth:1,label:"followed by admirers"},{data:[],backgroundColor:"#46B356",borderColor:"#46B380",borderWidth:1,label:"followed by followers"},{data:[],backgroundColor:"#466DB3",borderColor:"#466D80",borderWidth:1,label:"unknown"}],e.options.indexAxis="y",e.options.scales={x:{stacked:!0},y:{stacked:!0}},e}},{key:"_update",value:function(){for(var e=h.getTopFollowedBySummary(),t=this._getRootLabels(),n=this._getDataset(),r=0;r<e.length;r++)t[r]=h.getUserByID(e[r].userID).getUserName();n[0].data=e.map((function(e){return e.admiring})),n[1].data=e.map((function(e){return e.following})),n[2].data=e.map((function(e){return e.unknown}))}}])&&o(t.prototype,n),r&&o(t,r),l}(l));t.exports=f},{"../../../../singletons/users":"tachikomas/users","./ChartRoot":"tachikomas/ChartRoot"}],"tachikomas/main":[function(e,t,n){"use strict";function r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,c,"next",e)}function c(e){r(a,o,i,s,c,"throw",e)}s(void 0)}))}}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=e("./helpers/signals").eventSignals,s=e("./helpers/signals").domSignals,c=e("./helpers/utils"),u=e("./helpers/constants"),moment=e("./helpers/moment"),l=e("./singletons/twitchClient"),h=e("./singletons/auth"),f=e("./singletons/users"),p=e("./singletons/filter"),d="cir-active",y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentConnectivityLevel=void 0,this.activityStatusDom=document.getElementById("activity-status"),this.updateLatestProcessTime=_.throttle(this._updateLatestProcessTime.bind(this),1e3),this._latestProcessTime=0,a.add(this._eventSignalFunc.bind(this)),Handlebars.registerHelper("userFollowsCSS",this.userFollowsCSS),Handlebars.registerHelper("getInfoCss",this.getInfoCss)}var t,n,r;return t=e,(n=[{key:"_eventSignalFunc",value:function(e){e.alert&&e.alert.body?(document.getElementById("alerts").insertAdjacentHTML("afterbegin",templates["./hbs/shared/alerts.hbs"](e.alert)),new BSN.Alert(document.querySelector(".alert"))):"draw.nav.auth"===e.event?(this.configureAuthView(),this.configureConnectivityStatus()):"data.cache.updated"===e.event?(this.configureConnectivityStatus(),this.updateLatestProcessTime()):"draw.nav.actvitiy-status"===e.event&&this.configureConnectivityStatus()}},{key:"getNearestId",value:function(e){return e.id?e.id:e.parentElement?this.getNearestId(e.parentElement):"undefined"}},{key:"getConnectivityLevel",value:function(){return l.isConnected()?h.isAuthenticated()?d:"cir-active-no-auth":"cir-inactive"}},{key:"configureAuthView",value:function(){document.getElementById("nav-auth").innerHTML=templates["./hbs/components/nav-auth.hbs"](h)}},{key:"_updateLatestProcessTime",value:function(){this._latestProcessTime=moment.now()}},{key:"getLatestProcessTimeMS",value:function(){return this._latestProcessTime}},{key:"configureConnectivityStatus",value:function(){var e=this.getConnectivityLevel();if(this.currentConnectivityLevel!==e){switch(e){case d:this.activityStatusDom.className="blink circle ".concat(d);break;case"cir-inactive":this.activityStatusDom.className="circle ".concat("cir-inactive");break;case"cir-active-no-auth":this.activityStatusDom.className="blink circle ".concat("cir-active-no-auth")}this.currentConnectivityLevel=e}}},{key:"userFollowsCSS",value:function(e){var t=f.getUserByName(e);if(!t)return u.CSS_UNKNOWN;var n=t.isFollowingCurrent();return!1===n?u.CSS_NOT_FOLLOWING:n?u.CSS_FOLLOWING:u.CSS_UNKNOWN}},{key:"getInfoCss",value:function(e){return f.getUserByName(e).getInfoCss()}},{key:"activityStatusPopover",value:function(){var e,t;switch(this.getConnectivityLevel()){case"cir-inactive":t="Disconnected",e="Data collection is halted";break;case"cir-active-no-auth":t="Connected with no Auth",e="Data collection is limited";break;case d:t="Connected",e="Data is being collected"}e+="</br>Last data collection: ".concat(moment(this.getLatestProcessTimeMS()).format("YYYY-MM-DD HH:mm:ss")),document.getElementsByClassName("popover-header")[0].innerHTML=t,document.getElementsByClassName("popover-body")[0].innerHTML=e}}])&&i(t.prototype,n),r&&i(t,r),e}();window.env=e("./env.js"),window.onload=o(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.location&&window.location.hash&&(t=new URLSearchParams(window.location.hash.substr(1)),h.authenticate(t)),e.next=3,l.initializeClient();case 3:m.configureConnectivityStatus(),m.configureAuthView(),new BSN.Popover(m.activityStatusDom,{title:" ",content:" ",placement:"bottom"}),m.activityStatusDom.addEventListener("shown.bs.popover",m.activityStatusPopover.bind(m)),a.dispatch({event:"stream.load"}),window.setMinTopTimeoutEvent();case 9:case"end":return e.stop()}}),e)}))),window.authenticate=o(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.authenticate();case 2:(t=e.sent)&&(window.location=t);case 4:case"end":return e.stop()}}),e)}))),window.authLogout=function(){h.logout()},window.minuteEventDispatcher=function(){a.dispatch({event:"main.minute",channel:p.getChannel()}),window.setMinTopTimeoutEvent()},window.setMinTopTimeoutEvent=function(){var e=c.getNow().add(1,"minute").valueOf()-moment.now();window.minTopTimeoutEvent=setTimeout(a.dispatch.bind(a,{event:"main.minute.top"}),e+5)},window.minuteEventInterval=setInterval(window.minuteEventDispatcher,6e4),window.domEvent=function(e,t){s.dispatch({id:t||m.getNearestId(e.target),type:e.type,event:e})};var m=new y;t.exports=m},{"./env.js":"tachikomas/env","./helpers/constants":"tachikomas/constants","./helpers/moment":"tachikomas/moment","./helpers/signals":"tachikomas/signals","./helpers/utils":"tachikomas/utils","./singletons/auth":"tachikomas/auth","./singletons/filter":"tachikomas/filter","./singletons/twitchClient":"tachikomas/twitchClient","./singletons/users":"tachikomas/users"}],"tachikomas/moment":[function(e,t,n){"use strict";t.exports="undefined"==typeof moment?e("moment-timezone"):moment},{"moment-timezone":void 0}],"tachikomas/navOptionVC":[function(e,t,n){"use strict";function r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,c,"next",e)}function c(e){r(a,o,i,s,c,"throw",e)}s(void 0)}))}}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=e("../../../helpers/signals").eventSignals,s=e("../../twitchClient"),c=e("../../auth"),u=e("../../api"),l=e("../../../helpers/constants"),h=e("../../filter"),f=function(){function t(){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.channelInputAutoComplete=void 0,this.toDsipose=[],this.fetchList=_.debounce(this._fetchList.bind(this),500,{leading:!1}),this.streamSelect=_.debounce(this._streamSelect.bind(this),500,{leading:!1}),this.populateStreamInfo=_.debounce(this._populateStreamInfo.bind(this),500,{leading:!1}),this.syncChannelInput=_.debounce((function(){n.channelInputAutoComplete.input.value=h.getChannel()}),250,{leading:!1}),e("../../../helpers/signals").domSignals.add(this._domSignalsFunc.bind(this))}var n,r,f,p,d,y;return n=t,(r=[{key:"_domSignalsFunc",value:function(e){if("click"===e.type&&e.id.endsWith("-interval"))this._intervalClickEvent(e.event);else if("channel-input"===e.id)switch(e.type){case"keyup":this._onChannelInputKeyUp(e.event);break;case"click":this._refreshList();break;case"focusout":case"channel.input.update":this.syncChannelInput()}else if("channel-refresh"===e.id)switch(e.type){case"click":s.changeToRandomFeaturedStream()}else if("channel-save"===e.id)switch(e.type){case"click":s.saveChannel()}}},{key:"_onChannelInputKeyUp",value:function(e){if(13===e.keyCode||e.awesompleteSelect)return this.lastSearchedChannel=this.channelInputAutoComplete.input.value,void this.streamSelect();this._refreshList()}},{key:"_refreshList",value:function(){var e=this.channelInputAutoComplete.input.value;this.lastSearchedChannel!==e?(this.lastSearchedChannel=e,this.fetchList()):this.channelInputAutoComplete.open()}},{key:"_fetchList",value:(y=o(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.getChannelSearch(this.lastSearchedChannel,c.getAuthObj());case 2:t=e.sent,this.channelInputAutoComplete.list=(t.data||[]).map((function(e){return e.display_name}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"_streamSelect",value:(d=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.changeChannel(this.lastSearchedChannel);case 3:this.populateStreamInfo(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a.dispatch({alert:{type:"warning",body:"Requested ".concat(this.lastSearchedChannel," is not a valid channel.")}});case 9:this.channelInputAutoComplete.close();case 10:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(){return d.apply(this,arguments)})},{key:"_populateStreamInfo",value:(p=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.channelInputAutoComplete.input.value=this.lastSearchedChannel||h.getChannel(),document.getElementById("embeded-twitch-channel").innerText=h.getChannel(),e.prev=2,e.next=5,u.getChannelInfo(h.getChannel(),c.getAuthObj());case 5:this.streamInfo=e.sent,this.streamInfo&&this.streamInfo.data&&this.streamInfo.data.length>0?document.getElementById("embeded-twitch-desc").innerHTML="".concat(this.streamInfo.data[0].title):document.getElementById("embeded-twitch-desc").innerHTML="(inactive...)",e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),document.getElementById("embeded-twitch-desc").innerHTML="".concat(h.getChannel(),"'s stream");case 12:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(){return p.apply(this,arguments)})},{key:"_intervalClickEvent",value:function(e){var t=e.srcElement.innerHTML;switch(t){case"1 minute":h.setIntervalLevel(l.BUCKET_MIN);break;case"5 minutes":h.setIntervalLevel(l.BUCKET_FIVE);break;case"1 hour":h.setIntervalLevel(l.BUCKET_HOUR);break;case"1 day":h.setIntervalLevel(l.BUCKET_DAY)}document.getElementById("interval-selector-btn").innerText=t}},{key:"initialize",value:function(){this.destroy(),document.getElementById("nav-options").innerHTML=templates["./hbs/stream/nav-options.hbs"](),this.toDsipose.push(new BSN.Dropdown(document.getElementById("interval-selector"))),this.toDsipose.push(new BSN.Popover(document.getElementById("interval-selector-help"),{title:"Timeseries interval level",content:"Select timeseries interval level.",delay:500,placement:"bottom"})),this.toDsipose.push(new BSN.Popover(document.getElementById("channel-refresh-help"),{title:"Randomize channel",content:"Randomize channel based on featured streams API call.",delay:500,placement:"bottom"})),this.toDsipose.push(new BSN.Popover(document.getElementById("channel-save-help"),{title:"Save channel",content:"Cache channel to be used on next page time page loads.",delay:500,placement:"bottom"})),this.channelInputAutoComplete=new Awesomplete(document.getElementById("channel-input"),{minChars:4,maxItems:10,autoFirst:!0}),this.channelInputAutoComplete.input.addEventListener("awesomplete-selectcomplete",this._onChannelInputKeyUp.bind(this))}},{key:"destroy",value:function(){this.channelInputAutoComplete&&(this.channelInputAutoComplete.destroy(),this.channelInputAutoComplete=void 0),this.toDsipose.forEach((function(e){return e.dispose()})),this.toDsipose.length=0}}])&&i(n.prototype,r),f&&i(n,f),t}();t.exports=new f},{"../../../helpers/constants":"tachikomas/constants","../../../helpers/signals":"tachikomas/signals","../../api":"tachikomas/api","../../auth":"tachikomas/auth","../../filter":"tachikomas/filter","../../twitchClient":"tachikomas/twitchClient"}],"tachikomas/proceedsByTypesVC":[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=e("./ChartRoot"),f=e("../../../../helpers/constants"),p=e("../../../../singletons/dataCache"),d=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(y,e);var t,n,r,u,h,d=c(y);function y(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),(e=d.call(this,{type:"bar",chartDomSelector:"pie-proceeds",title:"Overall Proceeds",helpContent:"<p>Proceeds by type<br>\n<ul>\n<li>100 Cheers count</li>\n<li>Subscription count</li>\n<li>Re-Subscription count</li>\n<li>Subscription Gifts count</li>\n<li>Mystery Subscription count</li>\n</ul>\n</p>"}))._labels=Object.freeze(["100 Cheer","Subs","Resubs","Sub Gifts","Sub Mystery"]),e._messageTypes=Object.freeze([f.TYPE_CHEER,f.TYPE_SUB,f.TYPE_RESUB,f.TYPE_SUBGIFT,f.TYPE_SUBMYSTERY]),e._backgroundColor=Object.freeze(e._messageTypes.map((function(e){return f.CHART_BACKGROUND_COLOR[e]}))),e._borderColor=Object.freeze(e._messageTypes.map((function(e){return f.CHART_BORDER_COLOR[e]}))),e}return t=y,(n=[{key:"_update",value:(u=regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getParameters();case 2:t=e.sent,n=t.channel,r=t.startBucket,o=t.endBucket,i=this._getDataset(),a=i[0].data,s=p.get(n,r,o+f.BUCKET_MIN),a[0]=s[f.TYPE_CHEER]._sum,a[1]=s[f.TYPE_SUB]._sum,a[2]=s[f.TYPE_RESUB]._sum,a[3]=s[f.TYPE_SUBGIFT]._sum,a[4]=s[f.TYPE_SUBMYSTERY]._sum;case 14:case"end":return e.stop()}}),e,this)})),h=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=u.apply(e,t);function a(e){o(i,n,r,a,s,"next",e)}function s(e){o(i,n,r,a,s,"throw",e)}a(void 0)}))},function(){return h.apply(this,arguments)})},{key:"_defaultChartOptions",value:function(){var e=a(l(y.prototype),"_defaultChartOptions",this).call(this);return e.data.labels=this._labels,e.data.datasets[0].backgroundColor=this._backgroundColor,e.data.datasets[0].borderColor=this._borderColor,e}}])&&i(t.prototype,n),r&&i(t,r),y}(h));t.exports=d},{"../../../../helpers/constants":"tachikomas/constants","../../../../singletons/dataCache":"tachikomas/dataCache","./ChartRoot":"tachikomas/ChartRoot"}],"tachikomas/proceedsByUsersVC":[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=e("./ChartRoot"),d=e("../../../../helpers/constants"),y=e("../../../../singletons/dataCache"),m=e("../../../../helpers/utils"),b=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(b,e);var t,n,r,i,h,p=l(b);function b(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),(e=p.call(this,{chartDomSelector:"pie-proceeds-by-users",title:"Proceeds by User Name",helpContent:"<p>Proceeds by users<br>\n<ul>\n<li>100 Cheers</li>\n<li>Subscription count</li>\n<li>Re-Subscription count</li>\n<li>Subscription Gifts count</li>\n<li>Mystery Subscription count</li>\n</ul>\n</p>"}))._proceedsTypesToProcess=Object.freeze([d.TYPE_CHEER,d.TYPE_SUB,d.TYPE_RESUB,d.TYPE_SUBGIFT,d.TYPE_SUBMYSTERY]),e._displayLimit=10,e}return t=b,(n=[{key:"reset",value:function(){c(f(b.prototype),"reset",this).call(this),this._sumByType=[]}},{key:"_update",value:(i=regeneratorRuntime.mark((function e(){var t,n,r,i,a,s,c,u,l,h,f,p,b,v=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getParameters();case 2:for(t=e.sent,n=t.channel,r=t.startBucket,i=t.endBucket,a=y.get(n,r,i+d.BUCKET_MIN),s=this._proceedsTypesToProcess.reduce((function(e,t){return e?e.merge(a[t],!0):a[t].getCopy()}),null),c=Object.entries(s._users).sort((function(e,t){var n=o(e,2)[1];return o(t,2)[1]-n})),u=Math.min(c.length,this._displayLimit),l=this._getRootLabels(),h=this._getDataset(),f=h[0].data,p=function(e){var t=c[e][0];l[e]=t,f[e]=c[e][1],v._sumByType[e]=v._proceedsTypesToProcess.reduce((function(e,n){var r=a[n]._users[t];return r&&(e[n]=r),e}),{})},b=0;b<u;b++)p(b);l.length=u,f.length=u,this._sumByType.length=u,h[0].backgroundColor=m.getBackgroundColor(l),h[0].borderColor=m.getBorderColor(l);case 20:case"end":return e.stop()}}),e,this)})),h=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function s(e){a(o,n,r,s,c,"next",e)}function c(e){a(o,n,r,s,c,"throw",e)}s(void 0)}))},function(){return h.apply(this,arguments)})},{key:"_afterLabel",value:function(e){var t=this._chartObject.data.labels.indexOf(e),n=this._sumByType[t];return Object.keys(n||{}).map((function(e){var t=n[e];return"  ".concat(d.CHART_LABEL[e],": ").concat(e==d.TYPE_CHEER?100*t:t)}))}},{key:"_defaultChartOptions",value:function(){var e=c(f(b.prototype),"_defaultChartOptions",this).call(this);return e.options.plugins.tooltip={callbacks:{afterLabel:this._afterLabel.bind(this)}},e}}])&&s(t.prototype,n),r&&s(t,r),b}(p));t.exports=b},{"../../../../helpers/constants":"tachikomas/constants","../../../../helpers/utils":"tachikomas/utils","../../../../singletons/dataCache":"tachikomas/dataCache","./ChartRoot":"tachikomas/ChartRoot"}],"tachikomas/signals":[function(e,t,n){"use strict";var r=e("micro-signals").Signal;t.exports={eventSignals:new r,domSignals:new r}},{"micro-signals":void 0}],"tachikomas/stream":[function(e,t,n){"use strict";var r=e("../../../helpers/signals").eventSignals,o=e("./chattersTableVC"),i=e("./twitchEmbededVC"),a=e("./navOptionVC"),s=e("./dateTimeRangeVC"),c=function(e){switch(e.event){case"stream.load":document.getElementById("main").innerHTML=templates["./hbs/stream/index.hbs"](),o.initialize(),a.populateStreamInfo(),a.initialize(),i.initialize(),s.initialize(),r.dispatch({event:"stream.load.ready"});break;case"chatters.data.update.data":o.loadChattersTable();break;case"filter.change":e.changed&&e.changed.filter&&o.loadChattersTable(),e.changed&&e.changed.channel&&a.populateStreamInfo();break;case"main.minute":a.populateStreamInfo();break;case"date.change":s.setDate();break;case"main.minute.top":s.minProgressed();break;case"stream.cleanup":a.destroy(),s.destroy(),o.destroy();break;case"chatters.data.update.partial":o.updateChattersList()}};r.add(c),t.exports=c},{"../../../helpers/signals":"tachikomas/signals","./chattersTableVC":"tachikomas/chattersTableVC","./dateTimeRangeVC":"tachikomas/dateTimeRangeVC","./navOptionVC":"tachikomas/navOptionVC","./twitchEmbededVC":"tachikomas/twitchEmbededVC"}],"tachikomas/subsByTiersVC":[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=e("./ChartRoot"),f=e("../../../../singletons/users"),p=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(d,e);var t,n,r,u,h,p=c(d);function d(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),p.call(this,{type:"bar",chartDomSelector:"chart-subs-by-tiers",title:"Subscription counts by tiers and gifts.",helpContent:"<p>Subscription counts grouped by tiers and gifts.</p>"})}return t=d,(n=[{key:"_eventSignalsFunc",value:function(e){switch(e.event){case"filter.change":e.changed.channel&&this.reset();break;case"stream.load.ready":this._enabled=!0,this.reset();break;case"stream.cleanup":this._enabled=!1;break;case"fetch.channel.subscribed.refresh":this._enabled&&(this.update(),this._chartObject.update())}}},{key:"_defaultChartOptions",value:function(){var e=a(l(d.prototype),"_defaultChartOptions",this).call(this);return e.data.datasets=[{data:[],backgroundColor:"#F9E74B",borderColor:"##FBF08B",borderWidth:1,label:"gifted by others"},{data:[],backgroundColor:"#4B5DF9",borderColor:"#8B96FB",borderWidth:1,label:"own subscription"}],e.options.scales={x:{stacked:!0},y:{stacked:!0}},e}},{key:"_update",value:(u=regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=f.getSubscriptionsByTiers(),n=this._getRootLabels(),r=this._getDataset(),Object.keys(t).sort((function(e,t){return e-t})).forEach((function(e,o){n[o]=e,r[0].data[o]=t[e].gifted,r[1].data[o]=t[e].notGifted}));case 4:case"end":return e.stop()}}),e,this)})),h=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=u.apply(e,t);function a(e){o(i,n,r,a,s,"next",e)}function s(e){o(i,n,r,a,s,"throw",e)}a(void 0)}))},function(){return h.apply(this,arguments)})}])&&i(t.prototype,n),r&&i(t,r),d}(h));t.exports=p},{"../../../../singletons/users":"tachikomas/users","./ChartRoot":"tachikomas/ChartRoot"}],"tachikomas/timeseriesVC":[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=e("../../../../singletons/filter"),moment=e("../../../../helpers/moment"),h=e("../../../../helpers/constants"),f=e("./ChartRoot"),p=e("../../../../singletons/dataCache"),d=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(d,e);var t,n,r,c,u,f=s(d);function d(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),f.call(this,{chartDomSelector:"canvas-timeseries"})}return t=d,(n=[{key:"_update",value:(c=regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,s,c,u,l,f,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getParameters();case 2:for(t=e.sent,n=t.interval,r=t.startBucket,o=t.channel,i=t.length,a=this._getRootLabels(),s=this._getDataset(),c=0;c<i;c++)for(u=r+c*n,a[c]=moment.unix(u),l=p.get(o,u,u+n),f=0;f<h.NUM_TYPES;f++)s[f].data[c]=l[f]._sum,s[f].users[c]=l[f]._users;for(d=0;d<h.NUM_TYPES;d++)s[d].data.length=i,s[d].users.length=i;a.length=i;case 12:case"end":return e.stop()}}),e,this)})),u=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=c.apply(e,t);function a(e){o(i,n,r,a,s,"next",e)}function s(e){o(i,n,r,a,s,"throw",e)}a(void 0)}))},function(){return u.apply(this,arguments)})},{key:"_initializedChartObject",value:function(){this._chartObject&&this._chartObject.destroy(),this._chartObject=new Chart(document.getElementById(this._chartDomSelector),this._defaultChartOptions())}},{key:"_toolTipAfterLabel",value:function(e){if(e){var t=this._getDataset()[e.datasetIndex];if(0!==e.yLabel&&l.getSearchString()&&t.users&&t.users[e.dataIndex]){var n=t.users[e.dataIndex];return Object.keys(n).reduce((function(e,t){return e.push("  ".concat(t,": ").concat(n[t])),e}),[])}}}},{key:"_toolTipLabel",value:function(e){return"".concat(e.dataset.label,": ").concat(e.dataset.data[e.dataIndex])}},{key:"_toolTipTitle",value:function(e){var t=(e&&e[0]||{}).dataIndex;if(t>=0)return this._getRootLabels()[t].format("YYYY/MM/DD HH:mm")}},{key:"_toolTipFilter",value:function(e){return e&&"0"!=e.formattedValue}},{key:"_scaleTicksFontStyle",value:function(e){switch(l.getIntervalLevel()){case h.BUCKET_DAY:return 1===e.tick.value.days()?"bold":void 0;case h.BUCKET_HOUR:return 0===e.tick.value.hours()?"bold":void 0;case h.BUCKET_FIVE:return 0===e.tick.value.minutes()?"bold":void 0;case h.BUCKET_MIN:return e.tick.value.minutes()%5==0?"bold":void 0;default:return}}},{key:"_scaleTicksCallback",value:function(e){var t=this._getRootLabels()[e];if(0===t.hours()&&0===t.minutes())return t.format("M/D");switch(l.getIntervalLevel()){case h.BUCKET_DAY:return t.format("M/D");default:return t.format("HH:mm")}}},{key:"_defaultChartOptions",value:function(){for(var e=[],t=0;t<h.NUM_TYPES;t++)e.push({label:h.CHART_LABEL[t],backgroundColor:h.CHART_BACKGROUND_COLOR[t],borderColor:h.CHART_BORDER_COLOR[t],borderWidth:1,data:[],users:[]});return{type:"bar",data:{labels:[],label:"# of Events",datasets:e},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{display:!0,stacked:!0,ticks:{fontColor:"#7d7d7d",fontSize:14,fontStyle:this._scaleTicksFontStyle.bind(this),callback:this._scaleTicksCallback.bind(this)},gridLines:{display:!0,color:"#7d7d7d"}},y:{stacked:!0,gridLines:{display:!0,color:"#7d7d7d"},ticks:{fontColor:"#7d7d7d",fontSize:14,stepSize:5}}},plugins:{title:{display:!1},legend:{labels:{display:!0,color:"#7d7d7d"}},tooltip:{intersect:!1,mode:"index",filter:this._toolTipFilter.bind(this),callbacks:{title:this._toolTipTitle.bind(this),label:this._toolTipLabel.bind(this),afterLabel:this._toolTipAfterLabel.bind(this)}}}}}}}])&&i(t.prototype,n),r&&i(t,r),d}(f));t.exports=d},{"../../../../helpers/constants":"tachikomas/constants","../../../../helpers/moment":"tachikomas/moment","../../../../singletons/dataCache":"tachikomas/dataCache","../../../../singletons/filter":"tachikomas/filter","./ChartRoot":"tachikomas/ChartRoot"}],"tachikomas/twitchClient":[function(e,t,n){(function(n){(function(){"use strict";function r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,c,"next",e)}function c(e){r(a,o,i,s,c,"throw",e)}s(void 0)}))}}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=e("tmi.js"),_="undefined"!=typeof window?window._:void 0!==n?n._:null,s=e("../models/events"),c=e("../helpers/signals").eventSignals,u=e("../helpers/constants"),l=e("./filter"),h=e("../singletons/users"),f=e("../singletons/auth"),p=e("../singletons/api"),d=e("../singletons/dataCache"),y=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._enabled=!1,this.updateViewersCache=_.debounce(this._updateViewersCache.bind(this),500,{leading:!1}),this.saveChannel=_.debounce(this._saveChannel.bind(this),500,{leading:!1}),this._debouncedPing=_.debounce(this._ping.bind(this),5e3,{leading:!1}),this._throttledPing=_.throttle(this._ping.bind(this),1e3,{leading:!1}),this._lastPingSuccess=!0,c.add(this._eventSignalFunc.bind(this))}var t,n,r,m,b,v,g,w,k;return t=e,(n=[{key:"_eventSignalFunc",value:(k=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.event,e.next="filter.change"===e.t0?3:"stream.cleanup"===e.t0?5:"stream.load.ready"===e.t0?7:"channel.changed"===e.t0?9:11;break;case 3:return(t.changed.searchString||t.changed.channel)&&this.updateViewersCache(),e.abrupt("break",11);case 5:return this._disable(),e.abrupt("break",11);case 7:return this._enable(),e.abrupt("break",11);case 9:return this.changeChannel(t.channel),e.abrupt("break",11);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return k.apply(this,arguments)})},{key:"initializeClient",value:(w=o(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._client){e.next=2;break}return e.abrupt("return");case 2:if(!y._initPromise){e.next=5;break}return e.next=5,y._initPromise;case 5:return l.getChannel()||(f.isBroadcaster()?l.setChannelInfo(f.getLogin(),f.getID(),!0):l.setChannelInfo("xqcow",71092938,!0)),this._client=new a.Client({connection:{secure:!0,reconnect:!0,maxReconnectInterval:1e3,reconnectInterval:1e3,reconnectDecay:1,timeout:5e3},channels:[l.getChannel()]}),this._client.on("anongiftpaidupgrade",(function(e,n,r){t._processChatMessage(e,new s.AnonGift(r))})),this._client.on("ban",(function(e,n,r,o){t._processChatMessage(e,new s.Ban(o))})),this._client.on("chat",(function(e,n,r,o){t._processChatMessage(e,new s.Chat(n))})),this._client.on("cheer",(function(e,n,r){t._processChatMessage(e,new s.Cheer(n))})),this._client.on("timeout",(function(e,n,r){t._processChatMessage(e,new s.Timeout(n))})),this._client.on("submysterygift",(function(e,n,r,o,i){t._processChatMessage(e,new s.MysterySubGift(i,o,r))})),this._client.on("resub",(function(e,n,r,o,i,a){t._processChatMessage(e,new s.ReSub(i,a,r))})),this._client.on("subscription",(function(e,n,r,o,i){t._processChatMessage(e,new s.Sub(i,r))})),this._client.on("subgift",(function(e,n,r,o,i,a){t._processChatMessage(e,new s.SubGift(a,i,r))})),e.next=18,this._client.connect();case 18:this.ping(),this._initPromise=void 0;case 20:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)})},{key:"_processChatMessage",value:function(e,t){this.ping(),t.displayName&&h._ensureUserExists(t.userID,t.displayName),d.add(e,t)}},{key:"changeChannel",value:(g=o(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.getChannel()!==t){e.next=2;break}return e.abrupt("return");case 2:if(l.getChannel()&&this._client.part(l.getChannel()),!n){e.next=7;break}e.t0=n,e.next=12;break;case 7:return e.t1=parseInt,e.next=10,p.queryTwitchApi("kraken/users?login=".concat(t));case 10:e.t2=e.sent.users[0]._id,e.t0=(0,e.t1)(e.t2);case 12:return r=e.t0,e.next=15,this._client.join(t);case 15:l.setChannelInfo(t,r);case 16:case"end":return e.stop()}}),e,this)}))),function(e,t){return g.apply(this,arguments)})},{key:"_disable",value:function(){this._enabled=!1}},{key:"_enable",value:function(){this._enabled||(this._enabled=!0,this.updateViewersCache())}},{key:"_updateViewersCache",value:(v=o(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._enabled&&l.getChannel()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,p.queryTmiApi("group/user/".concat(l.getChannel(),"/chatters"));case 4:t=e.sent,c.dispatch({event:"chatters.data.update",data:t.chatters,channelID:l.getChannelId()});case 6:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"changeToRandomFeaturedStream",value:(b=o(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.queryTwitchApi("kraken/streams/featured?limit=100");case 3:t=e.sent,n=t.featured.filter((function(e){return e.stream.viewers>100&&e.stream.viewers<=u.MAX_VIEWERS_COUNTS_FOR_PROCESS})),r=n[Math.floor(Math.random()*n.length)],this.changeChannel(r.stream.channel.name,r.stream.channel._id),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),this.changeChannel("xqcow",71092938);case 12:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(){return b.apply(this,arguments)})},{key:"_saveChannel",value:function(){localStorage.setItem("channel",l.getChannel()),localStorage.setItem("channel-id",l.getChannelId()),c.dispatch({alert:{type:"success",body:"Successfully saved channel"}})}},{key:"isConnected",value:function(){return Boolean(this._client._isConnected()&&this._client.channels&&this._client.channels.length>0&&this._lastPingSuccess)}},{key:"_ping",value:(m=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._client){e.next=12;break}return e.prev=1,e.next=4,this._client.ping();case 4:this._lastPingSuccess=!0,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),this._lastPingSuccess=!1;case 10:e.next=13;break;case 12:this._lastPingSuccess=!1;case 13:c.dispatch({event:"draw.nav.actvitiy-status"}),this.ping();case 15:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(){return m.apply(this,arguments)})},{key:"ping",value:function(){this.isConnected()?this._debouncedPing():this._throttledPing()}}])&&i(t.prototype,n),r&&i(t,r),e}());y._initPromise=y.initializeClient(),t.exports=y}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../helpers/constants":"tachikomas/constants","../helpers/signals":"tachikomas/signals","../models/events":"tachikomas/events","../singletons/api":"tachikomas/api","../singletons/auth":"tachikomas/auth","../singletons/dataCache":"tachikomas/dataCache","../singletons/users":"tachikomas/users","./filter":"tachikomas/filter","tmi.js":void 0}],"tachikomas/twitchEmbededVC":[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=e("../../filter"),i=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.lastSearchedChannel=void 0,this.embededTwitch=void 0,this.twitchEmbededCollapse=void 0,this.streamInfo=void 0,this.toggleEmbededTwitch=_.debounce(this._toggleEmbededTwitch.bind(this),1e3,{leading:!1}),e("../../../helpers/signals").domSignals.add(this._domeEventFunction.bind(this))}var n,i,a;return n=t,(i=[{key:"_domeEventFunction",value:function(e){"click"===e.type&&"embeded-twitch-collapse"===e.id&&this.toggleEmbededTwitch()}},{key:"_getIsOpenTwitchEmbeded",value:function(){var e=localStorage.getItem("isOpenTwitchEmbeded");return!e||JSON.parse(e)}},{key:"_handleEmbededTwitch",value:function(){this._getIsOpenTwitchEmbeded()?this.embededTwitch=new Twitch.Embed("twitch-embed",{width:"100%",height:"100%",channel:o.getChannel(),autoplay:!0,muted:!0,allowfullscreen:!1}):this.embededTwitch&&this.embededTwitch.destroy()}},{key:"_toggleEmbededTwitch",value:function(){var e=document.getElementById("twitch-embed").classList.contains("show");localStorage.setItem("isOpenTwitchEmbeded",JSON.stringify(Boolean(e))),this._handleEmbededTwitch()}},{key:"initialize",value:function(){this.destroy();var e=document.getElementById("embeded-twitch-collapse");this.twitchEmbededCollapse=new BSN.Collapse(e),this._getIsOpenTwitchEmbeded()?this._handleEmbededTwitch():this.twitchEmbededCollapse.hide()}},{key:"destroy",value:function(){this.twitchEmbededCollapse&&(this.twitchEmbededCollapse.dispose(),this.twitchEmbededCollapse=void 0),this.embededTwitch&&(this.embededTwitch.destroy(),this.embededTwitch=void 0)}}])&&r(n.prototype,i),a&&r(n,a),t}();t.exports=new i},{"../../../helpers/signals":"tachikomas/signals","../../filter":"tachikomas/filter"}],"tachikomas/userFollowsFetcher":[function(e,t,n){(function(n){(function(){"use strict";function r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _="undefined"!=typeof window?window._:void 0!==n?n._:null,i=e("../../singletons/auth"),a=e("../../singletons/api"),s=e("../../helpers/signals").eventSignals,c=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.reset(),this._paginations={},this.fetch=_.throttle(this._fetch,5e3)}var t,n,c,u,l;return t=e,(n=[{key:"reset",value:function(){this._toFetch=new Set,this._running=0,this._toFetchArray&&(this._toFetchArray.length=0),this._toFetchArray=void 0}},{key:"add",value:function(e){this._toFetch.add(e),this.fetch()}},{key:"_fetch",value:function(){if(this._toFetchArray=Array.from(this._toFetch),0!==this._toFetchArray.length)for(var e=this._running;e<5;e++)this._running++,this._fetchUserFollows()}},{key:"_fetchUserFollows",value:(u=regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.getAuthObj();case 2:t=e.sent;case 3:if((n=(this._toFetchArray||[]).shift())&&"done"!==this._paginations[n]){e.next=7;break}return this._toFetch.delete(n),e.abrupt("break",28);case 7:e.prev=7;case 8:return r="helix/users/follows?first=100&from_id=".concat(n),e.next=11,a.queryTwitchApi(this._paginations[n]?"".concat(r,"&after=").concat(this._paginations[n]):r,t);case 11:if(o=e.sent,s.dispatch({event:"fetch.user.follows.resp",data:o,userID:n}),o.pagination&&o.pagination.cursor){e.next=17;break}return this._paginations[n]="done",this._toFetch.delete(n),e.abrupt("break",20);case 17:this._paginations[n]=o.pagination.cursor;case 18:e.next=8;break;case 20:e.next=26;break;case 22:return e.prev=22,e.t0=e.catch(7),console.warn("failed to fetch user follows",e.t0),e.abrupt("break",28);case 26:e.next=3;break;case 28:this._running=Math.max(0,this._running-1);case 29:case"end":return e.stop()}}),e,this,[[7,22]])})),l=function(){var e=this,t=arguments;return new Promise((function(n,o){var i=u.apply(e,t);function a(e){r(i,n,o,a,s,"next",e)}function s(e){r(i,n,o,a,s,"throw",e)}a(void 0)}))},function(){return l.apply(this,arguments)})}])&&o(t.prototype,n),c&&o(t,c),e}());t.exports=c}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../helpers/signals":"tachikomas/signals","../../singletons/api":"tachikomas/api","../../singletons/auth":"tachikomas/auth"}],"tachikomas/userIDFetcher":[function(e,t,n){(function(n){(function(){"use strict";function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,c,"next",e)}function c(e){i(a,r,o,s,c,"throw",e)}s(void 0)}))}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _="undefined"!=typeof window?window._:void 0!==n?n._:null,c=e("../../singletons/auth"),u=e("../../singletons/api"),l=e("../../helpers/signals").eventSignals,h=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.reset(),this._isRunning=void 0}var t,n,o,i,h;return t=e,(n=[{key:"reset",value:function(){this._names=new Set,this.fetch=_.throttle(this._fetch,2e3)}},{key:"add",value:function(e){this._names.add(e),this.fetch()}},{key:"_fetch",value:(h=a(regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isRunning){e.next=2;break}return e.abrupt("return");case 2:return this._isRunning=!0,t=Array.from(this._names),e.next=6,c.getAuthObj();case 6:for(n=e.sent,r=[],o=0;o<t.length;o+=100)r.push(t.slice(o,o+100));e.prev=9,i=0,a=r;case 11:if(!(i<a.length)){e.next=18;break}return s=a[i],e.next=15,this._fetchUserIDsForNames(n,s);case 15:i++,e.next=11;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),console.warn("failed to query for ids",e.t0);case 23:this._isRunning=!1;case 24:case"end":return e.stop()}}),e,this,[[9,20]])}))),function(){return h.apply(this,arguments)})},{key:"_fetchUserIDsForNames",value:(i=a(regeneratorRuntime.mark((function e(t,n){var o,i,a,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="helix/users?login=".concat(n.join("&login=")),e.next=3,u.queryTwitchApi(o,t);case 3:i=e.sent,a=r(i.data);try{for(a.s();!(s=a.n()).done;)c=s.value,this._names.delete(c.login.toLowerCase())}catch(e){a.e(e)}finally{a.f()}l.dispatch({event:"fetch.user.ids.resp",data:i});case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})}])&&s(t.prototype,n),o&&s(t,o),e}());t.exports=h}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../helpers/signals":"tachikomas/signals","../../singletons/api":"tachikomas/api","../../singletons/auth":"tachikomas/auth"}],"tachikomas/users":[function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}function a(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=e("../../helpers/signals").eventSignals,l=e("./User"),h=e("./userIDFetcher"),f=e("./userFollowsFetcher"),p=e("./channelSubscribedFetcher"),d=e("../../helpers/constants"),y=e("../filter"),m=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.reset(),u.add(this._eventSignalFunc.bind(this))}var t,n,a;return t=e,(n=[{key:"_eventSignalFunc",value:function(e){switch(e.event){case"chatters.data.update":this.processChattersData(e.data,e.channelID),p.fetch(e.channelID),u.dispatch({event:"chatters.data.update.data"});break;case"fetch.user.ids.resp":this.processUserIDsResp(e.data);break;case"fetch.user.follows.resp":this.processUserFollowsResp(e.data);break;case"fetch.channel.subscribed.resp":this.processChannelSubscribedResp(e.data);break;case"api.unthrottled":h.fetch(),f.fetch(),p.fetch();break;case"filter.change":e.changed.channel&&(h.reset(),f.reset(),this._ensureUserExists(e.changed.id,e.changed.channel));break;case"fetch.channel.follows.resp":this.processUserFollowsResp(e.data)}}},{key:"reset",value:function(){this._viewers={},this._idToUser={},this._nameToUser={},this._channelWarned={}}},{key:"getUserByID",value:function(e){return this._idToUser[e]}},{key:"getUserByName",value:function(e){return this._nameToUser[e.toLowerCase()]}},{key:"getViewers",value:function(){if(!y.getSearchString())return this._viewers;var e,t={},n=i(Object.entries(this._viewers)||{});try{for(n.s();!(e=n.n()).done;){var r=o(e.value,2),a=r[0],s=r[1];t[a]=s.filter((function(e){return e.isApplicable()}))}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"_ensureUserExists",value:function(e,t){var n=t.toLowerCase(),r=this.getUserByID(e)||this.getUserByName(n)||new l(e,t);return e&&!r._id&&(r._id=parseInt(e)),e&&!this._idToUser[e]&&(this._idToUser[e]=r),this._nameToUser[n]||(this._nameToUser[n]=r),r}},{key:"processChattersData",value:function(e,t){for(var n=this,r={},i=Object.values(e||{}).reduce((function(e,t){return t.length+e}),0),a=0,s=Object.entries(e||{});a<s.length;a++){var c=o(s[a],2),l=c[0],f=c[1];r[l]=f.sort().map((function(e){var t=e.toLowerCase();return n.getUserByName(t)||i<d.MAX_VIEWERS_COUNTS_FOR_PROCESS&&h.add(e),n._ensureUserExists(void 0,e)}))}i>=d.MAX_VIEWERS_COUNTS_FOR_PROCESS&&!this._channelWarned[t]&&(this._channelWarned[t]=!0,u.dispatch({alert:{type:"warning",body:"This channel has higher than ".concat(d.MAX_VIEWERS_COUNTS_FOR_PROCESS," viewers.  Halting some data gatherings to conserve API requests.")}})),this._viewers=r}},{key:"processUserFollowsResp",value:function(e){var t=this;e.data.forEach((function(e){var n=parseInt(e.to_id),r=parseInt(e.from_id),o=t._ensureUserExists(n,e.to_name),i=t._ensureUserExists(r,e.from_name);i.addFollowing(o.getID()),o.addFollowedBy(i.getID())})),u.dispatch({event:"chatters.data.update.partial"})}},{key:"processChannelSubscribedResp",value:function(e){var t=this;e.data.forEach((function(e){t._ensureUserExists(e.user_id,e.user_name).addSubscribedTo(e)})),u.dispatch({event:"fetch.channel.subscribed.refresh"})}},{key:"processUserIDsResp",value:function(e){var t,n=i(e.data);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=this._ensureUserExists(r.id,r.login);f.add(o.getID())}}catch(e){n.e(e)}finally{n.f()}}},{key:"getAllUsers",value:function(){return Object.values(this._idToUser)}},{key:"getFilteredUser",value:function(){return this.getAllUsers().filter((function(e){return e.isApplicable()}))}},{key:"getTopFollowedBySummary",value:function(){var e=this;return this.getFilteredUser().sort((function(e,t){var n=(t.getFollowedByCounts()||0)-(e.getFollowedByCounts()||0);return 0===n?t.getID()-e.getID():n})).slice(0,10).map((function(t){return e._getFollowedBySummary(t.getID())}))}},{key:"getSubscriptionsByTiers",value:function(){return this.getFilteredUser().reduce((function(e,t){var n=t.getSubscribedToCurrent();return n&&(e[n.tier]||(e[n.tier]={gifted:0,notGifted:0}),n.is_gift?e[n.tier].gifted++:e[n.tier].notGifted++),e}),{})}},{key:"_getFollowedBySummary",value:function(e){var t=this;if(this.getUserByID(e))return r(this.getUserByID(e)._followedBy||[]).map((function(e){return t.getUserByID(e)})).reduce((function(e,t){switch(t.isFollowingCurrent()){case void 0:e.unknown++;break;case!0:e.following++;break;case!1:e.admiring++}return e}),{userID:e,unknown:0,following:0,admiring:0})}}])&&c(t.prototype,n),a&&c(t,a),e}());t.exports=m},{"../../helpers/constants":"tachikomas/constants","../../helpers/signals":"tachikomas/signals","../filter":"tachikomas/filter","./User":"tachikomas/User","./channelSubscribedFetcher":"tachikomas/channelSubscribedFetcher","./userFollowsFetcher":"tachikomas/userFollowsFetcher","./userIDFetcher":"tachikomas/userIDFetcher"}],"tachikomas/utils":[function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var moment=e("../helpers/moment"),i=e("./constants"),a=e("../models/events"),s=e("material-color-hash").default,c=function(e,t){return"".concat(s(e,"200").backgroundColor).concat(t)};t.exports={muteSeconds:function(e){return e.set({second:0,millisecond:0})},getTimeBucket:function(e,t){if(t==i.BUCKET_DAY){var n=moment.unix(e);return n.set({hour:0,minute:0,second:0,millisecond:0}),n.unix()}return e-e%t},extractTabObj:function(e){if(0===e.length)return{tab:i.TABS_OPTIONS[0],args:{}};var t=e.indexOf("?")>-1?e.indexOf("?"):e.length,n=e.substr(1,t-1).toLowerCase(),r=i.TABS_OPTIONS.indexOf(n)>-1?n:i.TABS_OPTIONS[0],o=new URLSearchParams(e.substr(n.length+1));return{tab:r,args:Object.fromEntries(o.entries())}},getNow:function(){return moment().set({second:0,millisecond:0})},getMessageType:function(e){switch(!0){case e instanceof a.AnonGift:return i.TYPE_ANONGIFT;case e instanceof a.Ban:return i.TYPE_BAN;case e instanceof a.Cheer:return i.TYPE_CHEER;case e instanceof a.Chat:return i.TYPE_CHAT;case e instanceof a.MysterySubGift:return i.TYPE_SUBMYSTERY;case e instanceof a.ReSub:return i.TYPE_RESUB;case e instanceof a.SubGift:return i.TYPE_SUBGIFT;case e instanceof a.Sub:return i.TYPE_SUB;case e instanceof a.Timeout:return i.TYPE_TIMEOUT;default:throw"invalid object type: ".concat(e)}},getRaw:function(e,t){switch(parseInt(e)){case i.TYPE_ANONGIFT:return new a.AnonGift(t);case i.TYPE_BAN:return new a.Ban(t);case i.TYPE_CHEER:return new a.Cheer(t);case i.TYPE_CHAT:return new a.Chat(t);case i.TYPE_SUBMYSTERY:return new a.MysterySubGift(t);case i.TYPE_RESUB:return new a.ReSub(t);case i.TYPE_SUBGIFT:return new a.SubGift(t);case i.TYPE_SUB:return new a.Sub(t);case i.TYPE_TIMEOUT:return new a.Timeout(t);default:throw"invalid message type: ".concat(e)}},getHashedColor:function(e,t){return c(e,t)},getBackgroundColor:function(e){return e.map((function(e){return c(e,"4D")}))},getBorderColor:function(e){return e.map((function(e){return c(e,"FF")}))},convertObjectToHTML:function(e){return Object.entries(e||{}).map((function(e){var t=r(e,2),n=t[0],o=t[1];return"".concat(n,": ").concat(o)})).join("<br>")}}},{"../helpers/moment":"tachikomas/moment","../models/events":"tachikomas/events","./constants":"tachikomas/constants","material-color-hash":void 0}]},{},["tachikomas/env","tachikomas/constants","tachikomas/moment","tachikomas/signals","tachikomas/utils","tachikomas/main","tachikomas/AnonGift","tachikomas/Ban","tachikomas/Chat","tachikomas/Cheer","tachikomas/Common","tachikomas/events","tachikomas/MysterySubGift","tachikomas/ReSub","tachikomas/Sub","tachikomas/SubGift","tachikomas/Timeout","tachikomas/api","tachikomas/auth","tachikomas/dataCache","tachikomas/blanks","tachikomas/DataBucket","tachikomas/DataChannel","tachikomas/DataNode","tachikomas/filter","tachikomas/twitchClient","tachikomas/channelFollowsFetcher","tachikomas/channelSubscribedFetcher","tachikomas/users","tachikomas/User","tachikomas/userFollowsFetcher","tachikomas/userIDFetcher","tachikomas/ChartRoot","tachikomas/chatsByUsersVC","tachikomas/followedStreamersVC","tachikomas/proceedsByTypesVC","tachikomas/proceedsByUsersVC","tachikomas/subsByTiersVC","tachikomas/timeseriesVC","tachikomas/chattersTableVC","tachikomas/Chatters","tachikomas/DateTime","tachikomas/dateTimeRangeVC","tachikomas/stream","tachikomas/navOptionVC","tachikomas/twitchEmbededVC"]);